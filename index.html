<!DOCTYPE html>
<html lang="tr">
<head>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    <meta name="description" content="MarulGPT, günlük işlerinizi kolaylaştıran güçlü bir yapay zekâ asistanı. Soru sorun, fikir isteyin, kod yazdırın, hesap yaptırın—MarulGPT her zaman hazır!">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "MarulGPT",
      "url": "https://marulgpt.site",
      "logo": "https://marulgpt.site/favicon.png"
    }
    </script>

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="shortcut icon" href="/favicon.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9887645562823181"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BCT0RPZGTH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BCT0RPZGTH');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarulGPT - Akıllı Asistan</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #10a37f;
            --primary-dark: #0d8c6d;
            --primary-light: #e6f7f2;
            --secondary: #343541;
            --secondary-dark: #202123;
            --secondary-light: #40414f;
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --text-tertiary: #9ca3af;
            --accent: #f7b500;
            --accent-light: #fff3cd;
            --danger: #ef4444;
            --success: #10b981;
            --card-bg: #444654;
            --border-color: #565869;
            --sidebar-width: 280px;
            --header-height: 64px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Poppins', sans-serif;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            background-color: var(--secondary);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-height: 100vh;
        }

        .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            height: calc(100vh - var(--header-height));
        }

        header {
            background-color: var(--secondary-dark);
            height: var(--header-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            flex-shrink: 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .logo-icon {
            color: var(--primary);
            font-size: 28px;
            animation: pulse 2s infinite;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.5px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: var(--radius-lg);
            transition: var(--transition);
            background-color: rgba(255, 255, 255, 0.05);
            position: relative;
            border: 1px solid transparent;
        }

        .user-profile:hover {
            background-color: var(--secondary-light);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.2);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 15px;
            box-shadow: 0 4px 8px rgba(16, 163, 127, 0.3);
        }

        .question-counter {
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 700;
            animation: bounce 2s infinite alternate;
            box-shadow: 0 4px 8px rgba(16, 163, 127, 0.3);
            white-space: nowrap;
        }

        .info-toggle-btn {
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: var(--radius-lg);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .info-toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.3);
        }

        .info-toggle-btn i {
            transition: var(--transition);
        }

        .info-toggle-btn.active i {
            transform: rotate(180deg);
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--secondary-dark);
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-right: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        .sidebar-header {
            padding: 24px 16px 16px;
            flex-shrink: 0;
        }

        .new-chat-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 15px;
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.3);
        }

        .new-chat-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(16, 163, 127, 0.4);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            min-height: 0;
        }

        .chat-history-title {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-bottom: 16px;
            padding-left: 8px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-weight: 600;
        }

        .chat-history-empty {
            text-align: center;
            color: var(--text-tertiary);
            padding: 48px 24px;
            font-size: 14px;
            animation: fadeIn 1s ease-out;
        }

        .chat-history-empty i {
            font-size: 40px;
            margin-bottom: 20px;
            color: var(--primary);
            opacity: 0.5;
        }

        .sidebar-footer {
            padding: 20px 16px;
            border-top: 1px solid var(--border-color);
            flex-shrink: 0;
        }

        .upgrade-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            font-size: 15px;
        }

        .upgrade-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(16, 163, 127, 0.4);
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 0;
            height: 100%;
        }

        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: 100%;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
            display: flex;
            flex-direction: column;
            gap: 28px;
            scroll-behavior: smooth;
            height: calc(100vh - var(--header-height) - 180px);
            min-height: 0;
        }

        .welcome-message {
            text-align: center;
            max-width: 800px;
            margin: 40px auto 80px;
            animation: fadeIn 1s ease-out;
        }

        .welcome-icon {
            font-size: 72px;
            color: var(--primary);
            margin-bottom: 32px;
            animation: float 4s ease-in-out infinite;
        }

        .welcome-title {
            font-size: 48px;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 900;
            letter-spacing: -0.5px;
            line-height: 1.1;
        }

        .welcome-subtitle {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 48px;
            line-height: 1.6;
            font-weight: 400;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .capabilities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 28px;
            margin-top: 48px;
        }

        .capability {
            background: linear-gradient(145deg, rgba(68, 70, 84, 0.8), rgba(56, 58, 70, 0.8));
            border-radius: var(--radius-lg);
            padding: 28px;
            transition: var(--transition);
            border: 1px solid rgba(255,255,255,0.05);
        }

        .capability:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.25);
        }

        .capability i {
            font-size: 32px;
            color: var(--primary);
            margin-bottom: 24px;
            background: rgba(16, 163, 127, 0.1);
            width: 64px;
            height: 64px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .capability:hover i {
            transform: scale(1.1);
            box-shadow: 0 8px 16px rgba(16, 163, 127, 0.2);
        }

        .capability h3 {
            font-size: 20px;
            margin-bottom: 12px;
            font-weight: 700;
        }

        .capability p {
            font-size: 15px;
            color: var(--text-tertiary);
            line-height: 1.5;
        }

        .message {
            display: flex;
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            animation: slideIn 0.5s ease-out;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .message.assistant .message-avatar {
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }

        .message-content {
            background: linear-gradient(145deg, rgba(68, 70, 84, 0.8), rgba(56, 58, 70, 0.8));
            padding: 24px;
            border-radius: var(--radius-lg);
            max-width: 75%;
            line-height: 1.6;
            position: relative;
            border: 1px solid rgba(255,255,255,0.05);
            transition: var(--transition);
        }

        .message.user .message-content {
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            border: none;
        }

        .message-time {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-top: 12px;
            text-align: right;
            opacity: 0.8;
            font-weight: 500;
        }

        .input-container {
            padding: 24px 32px;
            border-top: 1px solid var(--border-color);
            background-color: var(--secondary);
            position: sticky;
            bottom: 0;
            z-index: 50;
            flex-shrink: 0;
        }

        .input-wrapper {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: 20px 80px 20px 28px;
            background-color: rgba(64, 65, 79, 0.8);
            border: 2px solid transparent;
            border-radius: var(--radius-lg);
            color: var(--text-primary);
            font-size: 16px;
            resize: none;
            min-height: 64px;
            max-height: 200px;
            outline: none;
            transition: var(--transition);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .chat-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(16, 163, 127, 0.2), inset 0 2px 8px rgba(0, 0, 0, 0.2);
            background-color: rgba(64, 65, 79, 1);
        }

        .send-btn {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            border: none;
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(16, 163, 127, 0.3);
        }

        .send-btn:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 20px rgba(16, 163, 127, 0.4);
        }

        .send-btn:disabled {
            background: var(--secondary-light);
            cursor: not-allowed;
            transform: translateY(-50%);
            box-shadow: none;
        }

        .input-footer {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 16px;
            font-size: 12px;
            color: var(--text-tertiary);
            gap: 10px;
            flex-wrap: wrap;
            text-align: center;
        }

        .input-footer i {
            color: var(--primary);
        }

        .info-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(145deg, rgba(32, 33, 35, 0.98), rgba(40, 42, 54, 0.98));
            border-top: 1px solid var(--border-color);
            z-index: 2000;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 80vh;
            overflow-y: auto;
            backdrop-filter: blur(20px);
            box-shadow: 0 -20px 60px rgba(0, 0, 0, 0.5);
        }

        .info-panel.active {
            transform: translateY(0);
        }

        .info-panel-header {
            padding: 24px 32px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            background: inherit;
            z-index: 10;
        }

        .info-panel-title {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .info-panel-close {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-tertiary);
            font-size: 24px;
            cursor: pointer;
            transition: var(--transition);
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .info-panel-close:hover {
            color: var(--text-primary);
            background-color: var(--secondary-light);
            transform: rotate(90deg);
        }

        .info-panel-content {
            padding: 32px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            margin-bottom: 40px;
        }

        .info-section {
            background: linear-gradient(145deg, rgba(68, 70, 84, 0.6), rgba(56, 58, 70, 0.6));
            border-radius: var(--radius-lg);
            padding: 28px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .info-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--text-secondary);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .info-section h3 i {
            color: var(--primary);
            font-size: 20px;
        }

        .info-links {
            list-style: none;
        }

        .info-links li {
            margin-bottom: 14px;
        }

        .info-links a {
            color: var(--text-tertiary);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 15px;
        }

        .info-links a:hover {
            color: var(--primary);
            transform: translateX(8px);
        }

        .info-links a i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .info-bottom {
            text-align: center;
            margin-top: 40px;
            padding-top: 32px;
            border-top: 1px solid var(--border-color);
            color: var(--text-tertiary);
            font-size: 14px;
        }

        .info-bottom strong {
            color: var(--primary);
            font-weight: 700;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: linear-gradient(145deg, rgba(32, 33, 35, 0.95), rgba(40, 42, 54, 0.95));
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            transform: translateY(30px) scale(0.95);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.5);
        }

        .modal-overlay.active .modal {
            transform: translateY(0) scale(1);
        }

        .modal-header {
            padding: 28px 32px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.5px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-tertiary);
            font-size: 28px;
            cursor: pointer;
            transition: var(--transition);
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--text-primary);
            background-color: var(--secondary-light);
            transform: rotate(90deg);
        }

        .modal-content {
            padding: 32px;
        }

        .plans {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 28px;
            margin-top: 24px;
        }

        .plan {
            background: linear-gradient(145deg, rgba(68, 70, 84, 0.8), rgba(56, 58, 70, 0.8));
            border-radius: var(--radius-lg);
            padding: 32px;
            border: 2px solid transparent;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .plan:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .plan.popular {
            border-color: var(--accent);
        }

        .popular-badge {
            position: absolute;
            top: -16px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--accent), #ff9900);
            color: #000;
            padding: 8px 24px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 900;
            letter-spacing: 0.5px;
            box-shadow: 0 8px 20px rgba(247, 181, 0, 0.3);
        }

        .plan-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .plan-name {
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 16px;
        }

        .plan-price {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 8px;
            line-height: 1;
        }

        .plan-period {
            color: var(--text-tertiary);
            font-size: 15px;
            font-weight: 500;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 32px;
            flex: 1;
        }

        .plan-feature {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .plan-feature i {
            color: var(--primary);
            font-size: 14px;
        }

        .plan-btn {
            width: 100%;
            padding: 18px;
            border-radius: var(--radius-md);
            border: none;
            font-weight: 800;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
            letter-spacing: 0.5px;
            margin-top: auto;
        }

        .plan-free .plan-btn {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
        }

        .plan-premium .plan-btn {
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
        }

        .plan-deluxe .plan-btn {
            background: linear-gradient(135deg, var(--accent), #ff9900);
            color: #000;
        }

        .plan-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
        }

        .plan-note {
            text-align: center;
            margin-top: 32px;
            font-size: 13px;
            color: var(--text-tertiary);
            font-style: italic;
        }

        .mobile-menu-btn {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: var(--text-primary);
            font-size: 22px;
            cursor: pointer;
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background-color: var(--secondary-light);
            transform: rotate(180deg);
        }

        .auth-modal {
            max-width: 500px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-form input {
            padding: 18px 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 16px;
            transition: var(--transition);
        }

        .auth-form input:focus {
            border-color: var(--primary);
            outline: none;
            background: rgba(255, 255, 255, 0.08);
        }

        .auth-form button {
            padding: 18px;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 800;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
            margin-top: 8px;
        }

        .auth-form button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 24px rgba(16, 163, 127, 0.3);
        }

        .auth-switch {
            text-align: center;
            margin-top: 24px;
            color: var(--text-tertiary);
        }

        .auth-switch a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 700;
            transition: var(--transition);
            position: relative;
        }

        .auth-switch a:hover {
            text-decoration: underline;
        }

        .auth-switch a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .auth-switch a:hover::after {
            width: 100%;
        }

        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 12px;
            align-items: center;
        }

        .typing-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--primary);
            animation: typing 1.5s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        .profile-menu {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            background: linear-gradient(145deg, rgba(32, 33, 35, 0.95), rgba(40, 42, 54, 0.95));
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 12px 0;
            min-width: 220px;
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.4);
            display: none;
            z-index: 1000;
            animation: fadeInUp 0.3s ease-out;
        }

        .profile-menu.active {
            display: block;
        }

        .profile-menu-item {
            padding: 14px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
            font-size: 14px;
        }

        .profile-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            padding-left: 28px;
        }

        .profile-menu-item i {
            width: 20px;
            color: var(--primary);
            font-size: 16px;
        }

        .chat-item {
            padding: 14px;
            border-radius: var(--radius-md);
            cursor: pointer;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
            background: transparent;
            border: 1px solid transparent;
        }

        .chat-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .chat-item.active {
            background: rgba(16, 163, 127, 0.15);
            border-color: var(--primary);
        }

        .chat-item-icon {
            font-size: 14px;
            color: var(--primary);
        }

        .chat-item-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 14px;
            flex: 1;
            font-weight: 500;
        }

        .chat-item-delete {
            color: var(--text-tertiary);
            opacity: 0;
            transition: var(--transition);
            padding: 4px;
            border-radius: 4px;
        }

        .chat-item:hover .chat-item-delete {
            opacity: 1;
        }

        .chat-item-delete:hover {
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
        }

        .typewriter-text {
            display: inline-block;
            overflow: hidden;
            white-space: pre-wrap;
            border-right: 2px solid var(--primary);
            animation: typingCursor 0.75s step-end infinite;
        }

        .message-content.typing {
            border-right-color: transparent;
        }

        .scroll-to-bottom {
            position: absolute;
            bottom: 100px;
            right: 32px;
            background: linear-gradient(135deg, var(--primary), #2ecc71);
            color: white;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            box-shadow: 0 8px 20px rgba(16, 163, 127, 0.4);
            z-index: 40;
        }

        .scroll-to-bottom.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .scroll-to-bottom:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 28px rgba(16, 163, 127, 0.5);
        }

        @media (max-width: 1100px) {
            .capabilities {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .info-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                top: var(--header-height);
                left: 0;
                bottom: 0;
                z-index: 200;
                transform: translateX(-100%);
                width: 280px;
                box-shadow: 8px 0 32px rgba(0, 0, 0, 0.4);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .mobile-menu-btn {
                display: flex;
            }

            .chat-container {
                padding: 24px;
                height: calc(100vh - var(--header-height) - 160px);
            }

            .welcome-title {
                font-size: 36px;
            }

            .welcome-subtitle {
                font-size: 18px;
            }

            .capabilities {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .message-content {
                max-width: 85%;
            }

            .plans {
                grid-template-columns: 1fr;
            }

            .modal {
                width: 95%;
            }
            
            .profile-menu {
                position: fixed;
                top: var(--header-height);
                right: 16px;
                left: 16px;
                width: auto;
            }
            
            .scroll-to-bottom {
                right: 24px;
                bottom: 120px;
            }
            
            .input-container {
                padding: 16px;
            }
            
            .chat-container {
                padding: 16px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .info-panel-header {
                padding: 16px 20px;
            }
            
            .info-panel-content {
                padding: 20px;
            }
            
            .info-toggle-btn span {
                display: none;
            }
            
            .info-toggle-btn {
                padding: 8px 12px;
            }
        }

        @media (max-width: 480px) {
            .welcome-title {
                font-size: 28px;
            }
            
            .welcome-icon {
                font-size: 56px;
            }
            
            .question-counter {
                font-size: 11px;
                padding: 4px 10px;
            }
            
            .user-profile span {
                display: none;
            }
            
            .chat-container {
                height: calc(100vh - var(--header-height) - 140px);
            }
            
            .info-toggle-btn i {
                margin: 0;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-5px); }
        }

        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0); }
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        @keyframes typingCursor {
            0%, 100% { border-color: transparent; }
            50% { border-color: var(--primary); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--secondary-light);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo" id="logo">
            <div class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </div>
            <div class="logo-icon">
                <i class="fas fa-leaf"></i>
            </div>
            <div class="logo-text">MarulGPT</div>
        </div>
        <div class="header-actions">
            <button class="info-toggle-btn" id="infoToggleBtn">
                <span>Bilgiler</span>
                <i class="fas fa-chevron-up"></i>
            </button>
            <div class="question-counter" id="questionCounter">10 soru hakkı</div>
            <div class="user-profile" id="userProfile">
                <div class="user-avatar" id="userAvatar">M</div>
                <span id="username">Misafir Kullanıcı</span>
                <i class="fas fa-chevron-down"></i>
                <div class="profile-menu" id="profileMenu">
                    <div class="profile-menu-item" id="profileView">
                        <i class="fas fa-user"></i>
                        <span id="profileText">Profil Bilgileri</span>
                    </div>
                    <div class="profile-menu-item" id="upgradePlan">
                        <i class="fas fa-crown"></i>
                        <span>Planı Yükselt</span>
                    </div>
                    <div class="profile-menu-item" id="settings">
                        <i class="fas fa-cog"></i>
                        <span>Ayarlar</span>
                    </div>
                    <div class="profile-menu-item" id="authAction">
                        <i class="fas fa-sign-in-alt"></i>
                        <span id="authText">Giriş Yap</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="app-container">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                    Yeni Sohbet
                </button>
            </div>
            <div class="chat-history" id="chatHistory">
                <div class="chat-history-title">Sohbet Geçmişi</div>
                <div class="chat-history-empty" id="emptyHistory">
                    <i class="fas fa-comments"></i>
                    <p>Henüz sohbet geçmişiniz yok</p>
                    <p style="margin-top: 10px; font-size: 12px;">Yeni bir sohbet başlatın</p>
                </div>
            </div>
            <div class="sidebar-footer">
                <button class="upgrade-btn" id="upgradeBtn">
                    <i class="fas fa-crown"></i>
                    PLANI YÜKSELT
                </button>
            </div>
        </div>

        <div class="main-content">
            <div class="chat-area">
                <div class="chat-container" id="chatContainer">
                    <div class="welcome-message" id="welcomeMessage">
                        <div class="welcome-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h1 class="welcome-title">Merhaba, ben MarulGPT!</h1>
                        <p class="welcome-subtitle">Size nasıl yardımcı olabilirim? Bugün kod yazma, yaratıcı fikirler üretme, öğrenme veya sorularınızı cevaplama konusunda destek olabilirim.</p>
                        
                        <div class="capabilities">
                            <div class="capability">
                                <i class="fas fa-lightbulb"></i>
                                <h3>Yaratıcı Fikirler</h3>
                                <p>Projeleriniz için yaratıcı fikirler ve çözümler üretin.</p>
                            </div>
                            <div class="capability">
                                <i class="fas fa-code"></i>
                                <h3>Kod Yazma</h3>
                                <p>Çeşitli programlama dillerinde kod yazma ve hata ayıklama.</p>
                            </div>
                            <div class="capability">
                                <i class="fas fa-graduation-cap"></i>
                                <h3>Öğrenme Desteği</h3>
                                <p>Karmaşık konuları basit şekilde öğrenmenize yardımcı olur.</p>
                            </div>
                            <div class="capability">
                                <i class="fas fa-comments"></i>
                                <h3>Akıllı Sohbet</h3>
                                <p>Doğal konuşma ile sorularınızı anlar ve cevaplar.</p>
                            </div>
                        </div>
                    </div>

                    <div id="messagesContainer"></div>
                </div>
                
                <div class="scroll-to-bottom" id="scrollToBottom">
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>

            <div class="input-container">
                <div class="input-wrapper">
                    <textarea class="chat-input" id="chatInput" placeholder="MarulGPT'e bir şeyler sorun... (Shift+Enter için yeni satır)" rows="1"></textarea>
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="input-footer">
                    <i class="fas fa-info-circle"></i>
                    <span>MarulGPT yanıtları test amaçlıdır. Kendi dil modelimiz değildir, arayüz testi için API kullanılmıştır.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="info-panel" id="infoPanel">
        <div class="info-panel-header">
            <h2 class="info-panel-title">MarulGPT Hakkında</h2>
            <button class="info-panel-close" id="infoPanelClose">&times;</button>
        </div>
        <div class="info-panel-content">
            <div class="info-grid">
                <div class="info-section">
                    <h3><i class="fas fa-info-circle"></i> MarulGPT</h3>
                    <p style="color: var(--text-tertiary); margin-bottom: 20px; line-height: 1.6;">MarulGPT, Ahmet Karakuş tarafından 2024'te geliştirilmeye başlandı ve bu versiyon betadır. Dil modelimiz hala geliştirilmektedir. Test aşamasında olan bu arayüz, kullanıcı deneyimini iyileştirmek için sürekli güncellenmektedir.</p>
                </div>
                <div class="info-section">
                    <h3><i class="fas fa-link"></i> Hızlı Bağlantılar</h3>
                    <ul class="info-links">
                        <li><a href="#"><i class="fas fa-home"></i> Ana Sayfa</a></li>
                        <li><a href="#" id="aboutLink"><i class="fas fa-info-circle"></i> Hakkımızda</a></li>
                        <li><a href="#"><i class="fas fa-question-circle"></i> SSS</a></li>
                        <li><a href="#"><i class="fas fa-blog"></i> Blog</a></li>
                    </ul>
                </div>
                <div class="info-section">
                    <h3><i class="fas fa-shield-alt"></i> Yasal & Gizlilik</h3>
                    <ul class="info-links">
                        <li><a href="#"><i class="fas fa-file-contract"></i> Kullanım Şartları</a></li>
                        <li><a href="#" id="privacyLink"><i class="fas fa-shield-alt"></i> Gizlilik Politikası</a></li>
                        <li><a href="#"><i class="fas fa-cookie"></i> Çerez Politikası</a></li>
                        <li><a href="#" id="dataInfo"><i class="fas fa-database"></i> Veri Saklama</a></li>
                    </ul>
                </div>
                <div class="info-section">
                    <h3><i class="fas fa-envelope"></i> Bize Ulaşın</h3>
                    <ul class="info-links">
                        <li><a href="mailto:marulgpt@gmail.com"><i class="fas fa-envelope"></i> marulgpt@gmail.com</a></li>
                        <li><a href="https://instagram.com/marulgpt" target="_blank"><i class="fab fa-instagram"></i> @marulgpt</a></li>
                        <li><a href="https://tiktok.com/@marulgpt" target="_blank"><i class="fab fa-tiktok"></i> @marulgpt</a></li>
                        <li><a href="https://x.com/marulgpt" target="_blank"><i class="fab fa-twitter"></i> @marulgpt</a></li>
                        <li><a href="https://youtube.com/@marulgpt" target="_blank"><i class="fab fa-youtube"></i> @marulgpt</a></li>
                    </ul>
                </div>
            </div>
            <div class="info-bottom">
                <p>&copy; 2024 MarulGPT. Tüm hakları saklıdır. <strong>Beta Sürümü v5.0.0</strong></p>
                <p style="margin-top: 10px; font-size: 13px;">Bu arayüz test amaçlıdır. Gerçek satın alma işlemi yapılamaz.</p>
                <p style="margin-top: 5px; font-size: 12px; opacity: 0.8;">Tüm konuşma verileri yerel olarak (cihazınızda) saklanır ve hiçbir sunucuya gönderilmez.</p>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="premiumModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Planınızı Yükseltin</h2>
                <button class="modal-close" id="closeModalBtn">&times;</button>
            </div>
            <div class="modal-content">
                <p style="margin-bottom: 25px; color: var(--text-secondary); line-height: 1.6;">MarulGPT'nin tüm özelliklerinden yararlanmak ve sınırsız soru sorma hakkına sahip olmak için size en uygun planı seçin.</p>
                
                <div class="plans">
                    <div class="plan plan-free">
                        <div class="plan-header">
                            <div class="plan-name">ÜCRETSİZ</div>
                            <div class="plan-price">₺0</div>
                            <div class="plan-period">Her zaman ücretsiz</div>
                        </div>
                        <ul class="plan-features">
                            <li class="plan-feature"><i class="fas fa-check"></i> 10 soru hakkı</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Temel model erişimi</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Standart hız</li>
                            <li class="plan-feature"><i class="fas fa-times"></i> Gelişmiş özellikler</li>
                            <li class="plan-feature"><i class="fas fa-times"></i> Öncelikli destek</li>
                        </ul>
                        <button class="plan-btn" data-plan="free">Mevcut Plan</button>
                    </div>

                    <div class="plan plan-premium popular">
                        <div class="popular-badge">EN POPÜLER</div>
                        <div class="plan-header">
                            <div class="plan-name">PREMIUM</div>
                            <div class="plan-price">₺99</div>
                            <div class="plan-period">aylık</div>
                        </div>
                        <ul class="plan-features">
                            <li class="plan-feature"><i class="fas fa-check"></i> Sınırsız mesaj</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Gelişmiş model erişimi</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Yüksek hız</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Gelişmiş özellikler</li>
                            <li class="plan-feature"><i class="fas fa-times"></i> Öncelikli destek</li>
                        </ul>
                        <button class="plan-btn" data-plan="premium">Yükselt</button>
                    </div>

                    <div class="plan plan-deluxe">
                        <div class="plan-header">
                            <div class="plan-name">DELUXE</div>
                            <div class="plan-price">₺199</div>
                            <div class="plan-period">aylık</div>
                        </div>
                        <ul class="plan-features">
                            <li class="plan-feature"><i class="fas fa-check"></i> Sınırsız mesaj</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> En gelişmiş model</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> En yüksek hız</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Tüm gelişmiş özellikler</li>
                            <li class="plan-feature"><i class="fas fa-check"></i> Öncelikli destek</li>
                        </ul>
                        <button class="plan-btn" data-plan="deluxe">Yükselt</button>
                    </div>
                </div>
                
                <div class="plan-note">
                    * Test amaçlıdır, satın alım yapılamaz.
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="authModal">
        <div class="modal auth-modal">
            <div class="modal-header">
                <h2 class="modal-title" id="authModalTitle">Giriş Yap</h2>
                <button class="modal-close" id="closeAuthModalBtn">&times;</button>
            </div>
            <div class="modal-content">
                <div class="auth-form" id="loginForm">
                    <input type="email" id="loginEmail" placeholder="E-posta adresiniz" required>
                    <input type="password" id="loginPassword" placeholder="Şifreniz" required>
                    <button type="button" id="loginBtn">Giriş Yap</button>
                </div>
                <div class="auth-form" id="registerForm" style="display: none;">
                    <input type="text" id="registerName" placeholder="Adınız ve soyadınız" required>
                    <input type="email" id="registerEmail" placeholder="E-posta adresiniz" required>
                    <input type="password" id="registerPassword" placeholder="Şifreniz (en az 6 karakter)" required>
                    <input type="password" id="registerPasswordConfirm" placeholder="Şifrenizi tekrar girin" required>
                    <button type="button" id="registerBtn">Kayıt Ol</button>
                </div>
                <div class="auth-switch">
                    <span id="authSwitchText">Hesabınız yok mu?</span>
                    <a href="#" id="authSwitchLink">Kayıt Ol</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_KEY = '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';
        const API_URL = 'https://api.groq.com/openai/v1/chat/completions';
        
        let messages = [];
        let currentChatId = Date.now();
        let questionCount = 10;
        let isAuthenticated = false;
        let currentUsername = "Misafir Kullanıcı";
        let chats = [];
        let currentConversationHistory = [];
        
        const STORAGE_KEYS = {
            CHATS: 'marulgpt_chats',
            CURRENT_CHAT_ID: 'marulgpt_currentChatId',
            QUESTION_COUNT: 'marulgpt_questionCount',
            IS_AUTHENTICATED: 'marulgpt_isAuthenticated',
            USERNAME: 'marulgpt_username',
            USER_AVATAR: 'marulgpt_userAvatar',
            CONVERSATION_HISTORY: 'marulgpt_conversationHistory'
        };
        
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const newChatBtn = document.getElementById('newChatBtn');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');
        const upgradeBtn = document.getElementById('upgradeBtn');
        const premiumModal = document.getElementById('premiumModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const chatContainer = document.getElementById('chatContainer');
        const messagesContainer = document.getElementById('messagesContainer');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const userProfile = document.getElementById('userProfile');
        const username = document.getElementById('username');
        const userAvatar = document.getElementById('userAvatar');
        const questionCounter = document.getElementById('questionCounter');
        const authModal = document.getElementById('authModal');
        const closeAuthModalBtn = document.getElementById('closeAuthModalBtn');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const authSwitchLink = document.getElementById('authSwitchLink');
        const authSwitchText = document.getElementById('authSwitchText');
        const authModalTitle = document.getElementById('authModalTitle');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const aboutLink = document.getElementById('aboutLink');
        const planButtons = document.querySelectorAll('.plan-btn');
        const profileMenu = document.getElementById('profileMenu');
        const profileView = document.getElementById('profileView');
        const profileText = document.getElementById('profileText');
        const upgradePlan = document.getElementById('upgradePlan');
        const settings = document.getElementById('settings');
        const authAction = document.getElementById('authAction');
        const authText = document.getElementById('authText');
        const chatHistory = document.getElementById('chatHistory');
        const emptyHistory = document.getElementById('emptyHistory');
        const scrollToBottomBtn = document.getElementById('scrollToBottom');
        const privacyLink = document.getElementById('privacyLink');
        const dataInfo = document.getElementById('dataInfo');
        const logo = document.getElementById('logo');
        const infoToggleBtn = document.getElementById('infoToggleBtn');
        const infoPanel = document.getElementById('infoPanel');
        const infoPanelClose = document.getElementById('infoPanelClose');
        
        function loadFromLocalStorage() {
            try {
                const savedChats = localStorage.getItem(STORAGE_KEYS.CHATS);
                if (savedChats) chats = JSON.parse(savedChats);
                
                const savedQuestionCount = localStorage.getItem(STORAGE_KEYS.QUESTION_COUNT);
                if (savedQuestionCount) questionCount = parseInt(savedQuestionCount);
                
                const savedIsAuthenticated = localStorage.getItem(STORAGE_KEYS.IS_AUTHENTICATED);
                if (savedIsAuthenticated) isAuthenticated = savedIsAuthenticated === 'true';
                
                const savedUsername = localStorage.getItem(STORAGE_KEYS.USERNAME);
                if (savedUsername) {
                    currentUsername = savedUsername;
                    username.textContent = currentUsername;
                    userAvatar.textContent = currentUsername.charAt(0).toUpperCase();
                }
                
                const savedUserAvatar = localStorage.getItem(STORAGE_KEYS.USER_AVATAR);
                if (savedUserAvatar) userAvatar.textContent = savedUserAvatar;
                
                const savedConversationHistory = localStorage.getItem(STORAGE_KEYS.CONVERSATION_HISTORY);
                if (savedConversationHistory) currentConversationHistory = JSON.parse(savedConversationHistory);
                
                updateProfileMenu();
                updateQuestionCounter();
            } catch (error) {
                console.error('LocalStorage yüklenirken hata:', error);
            }
        }
        
        function saveToLocalStorage() {
            try {
                localStorage.setItem(STORAGE_KEYS.CHATS, JSON.stringify(chats));
                localStorage.setItem(STORAGE_KEYS.QUESTION_COUNT, questionCount.toString());
                localStorage.setItem(STORAGE_KEYS.IS_AUTHENTICATED, isAuthenticated.toString());
                localStorage.setItem(STORAGE_KEYS.USERNAME, currentUsername);
                localStorage.setItem(STORAGE_KEYS.USER_AVATAR, userAvatar.textContent);
                localStorage.setItem(STORAGE_KEYS.CONVERSATION_HISTORY, JSON.stringify(currentConversationHistory));
            } catch (error) {
                console.error('LocalStorage kaydedilirken hata:', error);
            }
        }
        
        function updateProfileMenu() {
            if (isAuthenticated) {
                profileText.textContent = 'Profilim';
                authText.textContent = 'Çıkış Yap';
            } else {
                profileText.textContent = 'Profil Bilgileri';
                authText.textContent = 'Giriş Yap';
            }
        }
        
        loadFromLocalStorage();
        
        function toggleInfoPanel() {
            infoPanel.classList.toggle('active');
            infoToggleBtn.classList.toggle('active');
        }
        
        infoToggleBtn.addEventListener('click', toggleInfoPanel);
        infoPanelClose.addEventListener('click', toggleInfoPanel);
        
        infoPanel.addEventListener('click', (e) => {
            if (e.target === infoPanel) {
                toggleInfoPanel();
            }
        });
        
        mobileMenuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });
        
        newChatBtn.addEventListener('click', () => {
            if (questionCount <= 0 && !isAuthenticated) {
                showAuthModal();
                return;
            }
            
            if (messages.length > 0) {
                const chatTitle = getChatTitle(messages[0]?.text);
                const previousChat = {
                    id: currentChatId,
                    title: chatTitle,
                    messages: [...messages],
                    timestamp: Date.now()
                };
                
                chats.unshift(previousChat);
                if (chats.length > 20) chats = chats.slice(0, 20);
                
                updateChatHistory();
                saveToLocalStorage();
            }
            
            currentChatId = Date.now();
            messages = [];
            currentConversationHistory = [];
            
            updateMessages();
            welcomeMessage.style.display = 'block';
            chatContainer.scrollTop = 0;
            
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('active');
            }
            
            chatInput.focus();
            saveToLocalStorage();
        });
        
        function getChatTitle(firstMessage) {
            if (!firstMessage) return "Yeni Sohbet";
            const truncated = firstMessage.length > 30 ? firstMessage.substring(0, 30) + "..." : firstMessage;
            return truncated;
        }
        
        userProfile.addEventListener('click', (e) => {
            e.stopPropagation();
            profileMenu.classList.toggle('active');
        });
        
        document.addEventListener('click', (e) => {
            if (!userProfile.contains(e.target)) {
                profileMenu.classList.remove('active');
            }
        });
        
        profileView.addEventListener('click', () => {
            profileMenu.classList.remove('active');
            if (isAuthenticated) {
                alert(`Profil Bilgileri:\n\nKullanıcı Adı: ${currentUsername}\nE-posta: ${currentUsername.toLowerCase().replace(/\s/g, '')}@email.com\nÜyelik: ${questionCount === 999 ? 'Premium' : 'Ücretsiz'}\nKayıt Tarihi: 2024`);
            } else {
                alert('Misafir Kullanıcı\n\nHenüz giriş yapmadınız. Tüm özelliklerden faydalanmak için giriş yapın veya kayıt olun.');
            }
        });
        
        upgradePlan.addEventListener('click', () => {
            profileMenu.classList.remove('active');
            premiumModal.classList.add('active');
        });
        
        settings.addEventListener('click', () => {
            profileMenu.classList.remove('active');
            alert('Ayarlar sayfasına yönlendiriliyorsunuz...\n\nBu test sürümünde ayarlar henüz aktif değildir.');
        });
        
        authAction.addEventListener('click', () => {
            profileMenu.classList.remove('active');
            if (isAuthenticated) {
                if (confirm('Çıkış yapmak istediğinize emin misiniz?')) {
                    isAuthenticated = false;
                    currentUsername = "Misafir Kullanıcı";
                    questionCount = 10;
                    username.textContent = currentUsername;
                    userAvatar.textContent = "M";
                    updateProfileMenu();
                    updateQuestionCounter();
                    saveToLocalStorage();
                    alert('Başarıyla çıkış yaptınız.');
                }
            } else {
                showAuthModal();
            }
        });
        
        upgradeBtn.addEventListener('click', () => {
            premiumModal.classList.add('active');
        });
        
        closeModalBtn.addEventListener('click', () => {
            premiumModal.classList.remove('active');
        });
        
        premiumModal.addEventListener('click', (e) => {
            if (e.target === premiumModal) {
                premiumModal.classList.remove('active');
            }
        });
        
        aboutLink.addEventListener('click', (e) => {
            e.preventDefault();
            alert('MarulGPT, Ahmet Karakuş tarafından 2024 yılında geliştirilmeye başlanmış bir yapay zeka asistanı projesidir. Amacı kullanıcılarına ücretsiz ve kaliteli yapay zeka deneyimi sunmaktır. Şu anda beta aşamasında olan platform, kullanıcı geri bildirimleriyle sürekli geliştirilmektedir.');
        });
        
        privacyLink.addEventListener('click', (e) => {
            e.preventDefault();
            alert('Gizlilik Politikası\n\nMarulGPT, kullanıcı gizliliğine önem verir. Konuşma geçmişiniz yalnızca tarayıcınızda saklanır ve hiçbir sunucuya gönderilmez. Üçüncü taraf API\'lerle yapılan etkileşimlerde verileriniz şifrelenerek iletilir.');
        });
        
        dataInfo.addEventListener('click', (e) => {
            e.preventDefault();
            alert('Veri Saklama Bilgisi\n\nTüm konuşma verileriniz tarayıcınızın yerel depolama alanında saklanır. Bu veriler:\n1. Sadece sizin cihazınızda kalır\n2. Sunucularımıza gönderilmez\n3. Tarayıcı önbelleği temizlenene kadar saklanır\n4. Gizliliğiniz korunur');
        });
        
        planButtons.forEach(button => {
            button.addEventListener('click', () => {
                const plan = button.getAttribute('data-plan');
                
                if (plan === 'free') {
                    alert('Zaten Ücretsiz plan kullanıyorsunuz.');
                } else {
                    alert(`Seçilen plan: ${plan.toUpperCase()}. Bu test aşamasında satın alım yapılamaz.`);
                }
                
                premiumModal.classList.remove('active');
            });
        });
        
        function showAuthModal() {
            authModal.classList.add('active');
        }
        
        function closeAuthModal() {
            authModal.classList.remove('active');
        }
        
        closeAuthModalBtn.addEventListener('click', closeAuthModal);
        
        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) {
                closeAuthModal();
            }
        });
        
        authSwitchLink.addEventListener('click', (e) => {
            e.preventDefault();
            
            if (loginForm.style.display !== 'none') {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
                authModalTitle.textContent = 'Kayıt Ol';
                authSwitchText.textContent = 'Zaten hesabınız var mı?';
                authSwitchLink.textContent = 'Giriş Yap';
            } else {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
                authModalTitle.textContent = 'Giriş Yap';
                authSwitchText.textContent = 'Hesabınız yok mu?';
                authSwitchLink.textContent = 'Kayıt Ol';
            }
        });
        
        loginBtn.addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Lütfen tüm alanları doldurun.');
                return;
            }
            
            isAuthenticated = true;
            currentUsername = email.split('@')[0];
            username.textContent = currentUsername;
            userAvatar.textContent = currentUsername.charAt(0).toUpperCase();
            questionCount = 999;
            updateProfileMenu();
            updateQuestionCounter();
            closeAuthModal();
            
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
            
            saveToLocalStorage();
            showNotification(`Hoş geldiniz ${currentUsername}!`, 'success');
        });
        
        registerBtn.addEventListener('click', () => {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
            
            if (!name || !email || !password || !passwordConfirm) {
                alert('Lütfen tüm alanları doldurun.');
                return;
            }
            
            if (password.length < 6) {
                alert('Şifre en az 6 karakter olmalıdır.');
                return;
            }
            
            if (password !== passwordConfirm) {
                alert('Şifreler eşleşmiyor.');
                return;
            }
            
            isAuthenticated = true;
            currentUsername = name;
            username.textContent = currentUsername;
            userAvatar.textContent = name.charAt(0).toUpperCase();
            questionCount = 999;
            updateProfileMenu();
            updateQuestionCounter();
            closeAuthModal();
            
            document.getElementById('registerName').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerPasswordConfirm').value = '';
            
            saveToLocalStorage();
            showNotification(`Hoş geldiniz ${name}!`, 'success');
        });
        
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                background: ${type === 'success' ? 'var(--primary)' : 'var(--danger)'};
                color: white;
                border-radius: var(--radius-md);
                z-index: 3000;
                animation: slideInRight 0.3s ease-out;
                box-shadow: 0 8px 24px rgba(0,0,0,0.3);
                font-weight: 600;
                max-width: 300px;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.3s ease-out reverse';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        function updateQuestionCounter() {
            if (isAuthenticated) {
                questionCounter.textContent = 'Sınırsız soru';
                questionCounter.style.background = 'linear-gradient(135deg, var(--success), #10b981)';
            } else {
                questionCounter.textContent = `${questionCount} soru hakkı`;
                
                if (questionCount <= 3) {
                    questionCounter.style.background = 'linear-gradient(135deg, var(--danger), #ef4444)';
                } else if (questionCount <= 5) {
                    questionCounter.style.background = 'linear-gradient(135deg, var(--accent), #ff9900)';
                } else {
                    questionCounter.style.background = 'linear-gradient(135deg, var(--primary), #2ecc71)';
                }
            }
            saveToLocalStorage();
        }
        
        function checkScrollButton() {
            const { scrollTop, scrollHeight, clientHeight } = chatContainer;
            const isNearBottom = scrollHeight - scrollTop - clientHeight < 200;
            
            if (isNearBottom) {
                scrollToBottomBtn.classList.remove('visible');
            } else {
                scrollToBottomBtn.classList.add('visible');
            }
        }
        
        chatContainer.addEventListener('scroll', checkScrollButton);
        
        scrollToBottomBtn.addEventListener('click', () => {
            chatContainer.scrollTo({
                top: chatContainer.scrollHeight,
                behavior: 'smooth'
            });
        });
        
        function sendMessage() {
            const messageText = chatInput.value.trim();
            
            if (!messageText) return;
            
            if (questionCount <= 0 && !isAuthenticated) {
                showAuthModal();
                showNotification('Soru hakkınız kalmadı. Devam etmek için giriş yapın.', 'warning');
                return;
            }
            
            if (!isAuthenticated) {
                questionCount--;
                updateQuestionCounter();
                
                if (questionCount <= 0) {
                    sendBtn.disabled = true;
                    chatInput.placeholder = 'Soru hakkınız kalmadı. Devam etmek için giriş yapın.';
                    setTimeout(() => showAuthModal(), 500);
                }
            }
            
            const userMessage = {
                id: Date.now(),
                text: messageText,
                sender: 'user',
                time: new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })
            };
            
            messages.push(userMessage);
            currentConversationHistory.push({ role: 'user', content: messageText });
            
            chatInput.value = '';
            chatInput.style.height = 'auto';
            updateMessages();
            
            welcomeMessage.style.display = 'none';
            
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'message';
            typingIndicator.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-leaf"></i>
                </div>
                <div class="message-content typing">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingIndicator);
            
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight - chatContainer.clientHeight - 100;
            }, 100);
            
            sendMessageToAPI(messageText);
            saveToLocalStorage();
        }
        
        async function sendMessageToAPI(message) {
            try {
                const systemPrompt = `Sen MarulGPT'sin, Türk yapımı bir yapay zeka asistansın. Ahmet Karakuş tarafından 2024'te geliştirilmeye başlandın. Şu anda kullanıcı "${currentUsername}" ile konuşuyorsun. Kullanıcılara yardımcı olmak için buradasın. Cevapların kısa, net, dostane ve samimi olsun. Türkçe konuştuğunu unutma. Kullanıcının önceki mesajlarını hatırlayarak bağlamı koru. Eğer biri seni kimin yaptığını sorarsa, ana model hazır olana kadar geçici süreliğine arayüzü test etmek için konulmuş bir API anahtarı olduğunu söyle. Kendini MarulGPT olarak tanıt.`;
                
                const requestMessages = [
                    { role: 'system', content: systemPrompt },
                    ...currentConversationHistory
                ];
                
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'llama-3.1-8b-instant',
                        messages: requestMessages,
                        temperature: 0.7,
                        max_tokens: 500,
                        stream: false
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }
                
                const data = await response.json();
                
                document.querySelector('.typing-indicator')?.parentElement?.parentElement?.remove();
                
                const assistantMessage = {
                    id: Date.now(),
                    text: data.choices[0].message.content,
                    sender: 'assistant',
                    time: new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })
                };
                
                messages.push(assistantMessage);
                currentConversationHistory.push({ role: 'assistant', content: data.choices[0].message.content });
                
                displayMessageWithTypewriter(assistantMessage);
                saveToLocalStorage();
                
            } catch (error) {
                console.error('API hatası:', error);
                
                document.querySelector('.typing-indicator')?.parentElement?.parentElement?.remove();
                
                const errorMessage = {
                    id: Date.now(),
                    text: `Merhaba ${currentUsername}! Üzgünüm, şu anda teknik bir sorun yaşıyorum. Lütfen daha sonra tekrar deneyin. Bu bir test arayüzüdür ve Groq API'ye bağlanmaya çalışıyorum.`,
                    sender: 'assistant',
                    time: new Date().toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })
                };
                
                messages.push(errorMessage);
                currentConversationHistory.push({ role: 'assistant', content: errorMessage.text });
                
                displayMessageWithTypewriter(errorMessage);
                saveToLocalStorage();
            }
        }
        
        function displayMessageWithTypewriter(message) {
            const messageElement = document.createElement('div');
            messageElement.className = `message ${message.sender}`;
            messageElement.innerHTML = `
                <div class="message-avatar">
                    ${message.sender === 'assistant' ? '<i class="fas fa-leaf"></i>' : '<i class="fas fa-user"></i>'}
                </div>
                <div class="message-content">
                    <div class="typewriter-text" id="typewriter-${message.id}"></div>
                    <div class="message-time">${message.time}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageElement);
            
            const textElement = document.getElementById(`typewriter-${message.id}`);
            const text = message.text;
            let i = 0;
            
            function typeWriter() {
                if (i < text.length) {
                    textElement.innerHTML += text.charAt(i);
                    i++;
                    
                    checkScrollButton();
                    
                    if (i % 10 === 0) {
                        setTimeout(typeWriter, 5);
                    } else {
                        setTimeout(typeWriter, 10);
                    }
                } else {
                    textElement.style.borderRight = 'none';
                    saveToLocalStorage();
                }
            }
            
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight - chatContainer.clientHeight - 100;
            }, 100);
            
            typeWriter();
        }
        
        function updateMessages() {
            messagesContainer.innerHTML = '';
            
            messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = `message ${message.sender}`;
                messageElement.innerHTML = `
                    <div class="message-avatar">
                        ${message.sender === 'assistant' ? '<i class="fas fa-leaf"></i>' : '<i class="fas fa-user"></i>'}
                    </div>
                    <div class="message-content">
                        ${message.text.replace(/\n/g, '<br>')}
                        <div class="message-time">${message.time}</div>
                    </div>
                `;
                
                messagesContainer.appendChild(messageElement);
            });
            
            if (messages.length > 0) {
                setTimeout(() => {
                    chatContainer.scrollTop = chatContainer.scrollHeight - chatContainer.clientHeight - 100;
                }, 100);
            }
        }
        
        function updateChatHistory() {
            const chatHistoryElement = document.getElementById('chatHistory');
            const existingChats = chatHistoryElement.querySelectorAll('.chat-item');
            existingChats.forEach(chat => chat.remove());
            
            if (chats.length === 0) {
                emptyHistory.style.display = 'block';
                return;
            }
            
            emptyHistory.style.display = 'none';
            
            chats.forEach((chat, index) => {
                const chatItem = document.createElement('div');
                chatItem.className = 'chat-item';
                if (chat.id === currentChatId) chatItem.classList.add('active');
                chatItem.innerHTML = `
                    <i class="fas fa-message chat-item-icon"></i>
                    <div class="chat-item-text">${chat.title}</div>
                    <i class="fas fa-trash chat-item-delete" data-index="${index}"></i>
                `;
                
                chatItem.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('fa-trash')) {
                        loadChat(chat);
                        if (window.innerWidth <= 768) {
                            sidebar.classList.remove('active');
                        }
                    }
                });
                
                const deleteBtn = chatItem.querySelector('.chat-item-delete');
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (confirm('Bu sohbeti silmek istediğinize emin misiniz?')) {
                        chats.splice(index, 1);
                        updateChatHistory();
                        saveToLocalStorage();
                        showNotification('Sohbet silindi', 'success');
                    }
                });
                
                chatHistoryElement.appendChild(chatItem);
            });
        }
        
        function loadChat(chat) {
            currentChatId = chat.id;
            messages = [...chat.messages];
            currentConversationHistory = [];
            
            messages.forEach(msg => {
                if (msg.sender === 'user') {
                    currentConversationHistory.push({ role: 'user', content: msg.text });
                } else {
                    currentConversationHistory.push({ role: 'assistant', content: msg.text });
                }
            });
            
            updateMessages();
            welcomeMessage.style.display = 'none';
            
            setTimeout(() => {
                chatContainer.scrollTop = chatContainer.scrollHeight - chatContainer.clientHeight - 100;
            }, 100);
            
            updateChatHistory();
        }
        
        sendBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
            
            setTimeout(() => {
                chatInput.style.height = 'auto';
                chatInput.style.height = (chatInput.scrollHeight) + 'px';
            }, 0);
        });
        
        logo.addEventListener('click', () => {
            chatContainer.scrollTo({ top: 0, behavior: 'smooth' });
            welcomeMessage.style.display = 'block';
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            updateQuestionCounter();
            updateChatHistory();
            chatInput.focus();
            checkScrollButton();
            
            setTimeout(() => {
                if (!isAuthenticated && questionCount > 0) {
                    showNotification('Misafir olarak 10 soru sorma hakkınız var!', 'info');
                }
            }, 1000);
        });
        
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('active');
            }
            checkScrollButton();
        });
        
        setInterval(saveToLocalStorage, 30000);
        
        window.addEventListener('beforeunload', () => {
            saveToLocalStorage();
        });
    </script>
</body>
</html>
